- 这次修改范围涉及 loader  model evaluate config
"""
1. loader
   根据model_type 去处理bert 或者lstm
   如果是bert ,对label  进行这样处理 labels = [-1] + labels + [-1]
   前后加上 -1  跟paddIng 保持一致 方便交叉熵那边可以直接忽略
2.  model
   根据model_type 去处理bert 或者lstm
   forwad 那边 
        if self.model_type == "bert":
            x, _ = self.layer(x)
        else:
            x = self.embedding(x)  #input shape:(batch_size, sen_len)
            x, _ = self.layer(x)      #input shape:(batch_size, sen_len, input_dim)
3.  evaluate
   这里会对测试集的label 也就是true_label 进行处理去掉首尾 -1   ，然后预测的label 也是去掉首尾 保持长度一致
   因为我发现只对测试集的label 进行处理  ，得到的准确率 召唤率都是0 ，所以对预测的label 也进行处理
4. config
   加入一些兼容bert的配置
"""
 有个疑问，看看老师下次上课能否顺便讲下我这个场景下的问题，就是在评估阶段，去掉首尾，  数据预处理阶段 采用-1 对label 进行拼接：
  下面是打印评估那边 label值
"""
true_label: [-1, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 0, 4, 4, 4, 4, 4, 4, 4, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]
len 100
end true_label: [8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 0, 4, 4, 4, 4, 4, 4, 4, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]
len 98
pred_label: [8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 1, 5, 5, 5, 5, 5, 4, 4, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8]

"""
可以看出 pred_label的label 都属于在schema 中的label值，但是为保持长度对齐去掉了 2个，但是毕竟去掉2个合理 label 而不是 占位的 -1 label

从当前处理方式得到的准确结果还不错：
"""
2025-01-22 17:53:15,013 - __main__ - INFO - PERSON类实体，准确率：0.810526, 召回率: 0.793814, F1: 0.802078
2025-01-22 17:53:15,013 - __main__ - INFO - LOCATION类实体，准确率：0.820628, 召回率: 0.765690, F1: 0.792203
2025-01-22 17:53:15,013 - __main__ - INFO - TIME类实体，准确率：0.923567, 召回率: 0.814607, F1: 0.865667
2025-01-22 17:53:15,013 - __main__ - INFO - ORGANIZATION类实体，准确率：0.700000, 召回率: 0.515789, F1: 0.593934
"""
但是我不太确定我这样的处理方式合不合理，或者造成什么隐患